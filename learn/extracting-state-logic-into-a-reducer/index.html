<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="It's React, but in Python."><meta name=author content=Archmonger><link href=https://reactive-python.github.io/reactpy/learn/extracting-state-logic-into-a-reducer/ rel=canonical><link href=../preserving-and-resetting-state/ rel=prev><link href=../passing-data-deeply-with-context/ rel=next><link rel=icon href=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.0"><title>Extracting State Logic into a Reducer ðŸš§ - ReactPy</title><link rel=stylesheet href=../../assets/stylesheets/main.9f615399.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.649f08f9.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h224V368c0-26.5 21.5-48 48-48h112V96c0-35.3-28.7-64-64-64H64zm384 320H336c-8.8 0-16 7.2-16 16v112l32-32 64-64 32-32z"/></svg>');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../assets/css/main.css><link rel=stylesheet href=../../assets/css/button.css><link rel=stylesheet href=../../assets/css/admonition.css><link rel=stylesheet href=../../assets/css/banner.css><link rel=stylesheet href=../../assets/css/sidebar.css><link rel=stylesheet href=../../assets/css/navbar.css><link rel=stylesheet href=../../assets/css/table-of-contents.css><link rel=stylesheet href=../../assets/css/code.css><link rel=stylesheet href=../../assets/css/footer.css><link rel=stylesheet href=../../assets/css/home.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest release. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=ReactPy class="md-header__button md-logo" aria-label=ReactPy data-md-component=logo> <img src=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ReactPy </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Extracting State Logic into a Reducer ðŸš§ </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81 1.42-1.42M1 13h3v-2H1m12 9h-2v3h2"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/reactive-python/reactpy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ReactPy </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../quick-start/ class=md-tabs__link> Get Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../your-first-component/ class=md-tabs__link> Learn </a> </li> <li class=md-tabs__item> <a href=../../reference/overview/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../about/changelog/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=ReactPy class="md-nav__button md-logo" aria-label=ReactPy data-md-component=logo> <img src=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg alt=logo> </a> ReactPy </label> <div class=md-nav__source> <a href=https://github.com/reactive-python/reactpy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ReactPy </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Get Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Get Started </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> Quick Start </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Quick Start </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick start </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-tic-tac-toe/ class=md-nav__link> <span class=md-ellipsis> Tutorial: Tic-Tac-Toe ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../thinking-in-react/ class=md-nav__link> <span class=md-ellipsis> Thinking in React </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Installation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../creating-a-react-app/ class=md-nav__link> <span class=md-ellipsis> Creating a Standalone React App </span> </a> </li> <li class=md-nav__item> <a href=../add-react-to-an-existing-project/ class=md-nav__link> <span class=md-ellipsis> Add React to an Existing Project </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../editor-setup/ class=md-nav__link> <span class=md-ellipsis> Editor Setup </span> </a> </li> <li class=md-nav__item> <a href=../extra-tools-and-packages/ class=md-nav__link> <span class=md-ellipsis> Tools, Modules, and Packages ðŸš§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Learn </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Learn </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Describing the UI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Describing the UI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../your-first-component/ class=md-nav__link> <span class=md-ellipsis> Your First Component ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../importing-and-exporting-components/ class=md-nav__link> <span class=md-ellipsis> Importing and Exporting Components ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../passing-props-to-a-component/ class=md-nav__link> <span class=md-ellipsis> Passing Props to a Component ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../conditional-rendering/ class=md-nav__link> <span class=md-ellipsis> Conditional Rendering ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../rendering-lists/ class=md-nav__link> <span class=md-ellipsis> Rendering Lists ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../keeping-components-pure/ class=md-nav__link> <span class=md-ellipsis> Keeping Components Pure ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Adding Interactivity </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Adding Interactivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../responding-to-events/ class=md-nav__link> <span class=md-ellipsis> Responding to Events ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../state-a-components-memory/ class=md-nav__link> <span class=md-ellipsis> State: A Component's Memory ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../render-and-commit/ class=md-nav__link> <span class=md-ellipsis> Render and Commit ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../state-as-a-snapshot/ class=md-nav__link> <span class=md-ellipsis> State as a Snapshot ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../queueing-a-series-of-state-updates/ class=md-nav__link> <span class=md-ellipsis> Queueing a Series of State Updates ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../updating-objects-in-state/ class=md-nav__link> <span class=md-ellipsis> Updating Objects in State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../updating-arrays-in-state/ class=md-nav__link> <span class=md-ellipsis> Updating Arrays in State ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Managing State </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Managing State </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reacting-to-input-with-state/ class=md-nav__link> <span class=md-ellipsis> Reacting to Input with State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../choosing-the-state-structure/ class=md-nav__link> <span class=md-ellipsis> Choosing the State Structure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../sharing-state-between-components/ class=md-nav__link> <span class=md-ellipsis> Sharing State Between Components ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../preserving-and-resetting-state/ class=md-nav__link> <span class=md-ellipsis> Preserving and Resetting State ðŸš§ </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Extracting State Logic into a Reducer ðŸš§ </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Extracting State Logic into a Reducer ðŸš§ </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#consolidate-state-logic-with-a-reducer class=md-nav__link> Consolidate state logic with a reducer </a> <nav class=md-nav aria-label="Consolidate state logic with a reducer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-move-from-setting-state-to-dispatching-actions class=md-nav__link> Step 1: Move from setting state to dispatching actions </a> </li> <li class=md-nav__item> <a href=#step-2-write-a-reducer-function class=md-nav__link> Step 2: Write a reducer function </a> <nav class=md-nav aria-label="Step 2: Write a reducer function"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-are-reducers-called-this-way class=md-nav__link> Why are reducers called this way? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#step-3-use-the-reducer-from-your-component class=md-nav__link> Step 3: Use the reducer from your component </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#comparing-usestate-and-usereducer class=md-nav__link> Comparing useState and useReducer </a> </li> <li class=md-nav__item> <a href=#writing-reducers-well class=md-nav__link> Writing reducers well </a> </li> <li class=md-nav__item> <a href=#writing-concise-reducers-with-immer class=md-nav__link> Writing concise reducers with Immer </a> <nav class=md-nav aria-label="Writing concise reducers with Immer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dispatch-actions-from-event-handlers class=md-nav__link> Dispatch actions from event handlers </a> </li> <li class=md-nav__item> <a href=#clear-the-input-on-sending-a-message class=md-nav__link> Clear the input on sending a message </a> </li> <li class=md-nav__item> <a href=#restore-input-values-when-switching-between-tabs class=md-nav__link> Restore input values when switching between tabs </a> </li> <li class=md-nav__item> <a href=#implement-usereducer-from-scratch class=md-nav__link> Implement useReducer from scratch </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../passing-data-deeply-with-context/ class=md-nav__link> <span class=md-ellipsis> Passing Data Deeply with Context ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../scaling-up-with-reducer-and-context/ class=md-nav__link> <span class=md-ellipsis> Scaling Up with Reducer and Context ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Escape Hatches </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Escape Hatches </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../referencing-values-with-refs/ class=md-nav__link> <span class=md-ellipsis> Referencing Values with Refs ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../manipulating-the-dom-with-refs/ class=md-nav__link> <span class=md-ellipsis> Manipulating the DOM with Refs ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../synchronizing-with-effects/ class=md-nav__link> <span class=md-ellipsis> Synchronizing with Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../you-might-not-need-an-effect/ class=md-nav__link> <span class=md-ellipsis> You Might Not Need an Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../lifecycle-of-reactive-effects/ class=md-nav__link> <span class=md-ellipsis> Lifecycle of Reactive Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../separating-events-from-effects/ class=md-nav__link> <span class=md-ellipsis> Separating Events from Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../removing-effect-dependencies/ class=md-nav__link> <span class=md-ellipsis> Removing Effect Dependencies ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../reusing-logic-with-custom-hooks/ class=md-nav__link> <span class=md-ellipsis> Reusing Logic with Custom Hooks ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../communicate-data-between-server-and-client/ class=md-nav__link> <span class=md-ellipsis> Communicating Data Between Server and Client ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../convert-between-vdom-and-html/ class=md-nav__link> <span class=md-ellipsis> Convert Between VDOM and HTML ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../vdom-mutations/ class=md-nav__link> <span class=md-ellipsis> VDOM Mutations ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-vdom-event-handlers/ class=md-nav__link> <span class=md-ellipsis> Creating VDOM Event Handlers ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-html-tags/ class=md-nav__link> <span class=md-ellipsis> Creating HTML Tags ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-backends/ class=md-nav__link> <span class=md-ellipsis> Creating Backends ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../manually-register-a-client/ class=md-nav__link> <span class=md-ellipsis> Manually Register a Client ðŸš§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Hooks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Hooks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/use-state/ class=md-nav__link> <span class=md-ellipsis> Use State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-effect/ class=md-nav__link> <span class=md-ellipsis> Use Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-async-effect/ class=md-nav__link> <span class=md-ellipsis> Use Async Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-context/ class=md-nav__link> <span class=md-ellipsis> Use Context ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-reducer/ class=md-nav__link> <span class=md-ellipsis> Use Reducer ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-callback/ class=md-nav__link> <span class=md-ellipsis> Use Callback ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-memo/ class=md-nav__link> <span class=md-ellipsis> Use Memo ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-ref/ class=md-nav__link> <span class=md-ellipsis> Use Ref ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-debug-value/ class=md-nav__link> <span class=md-ellipsis> Use Debug Value ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-connection/ class=md-nav__link> <span class=md-ellipsis> Use Connection ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-scope/ class=md-nav__link> <span class=md-ellipsis> Use Scope ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-location/ class=md-nav__link> <span class=md-ellipsis> Use Location ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> HTML Tags </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> HTML Tags </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/common-props/ class=md-nav__link> <span class=md-ellipsis> Common Props ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/usage/ class=md-nav__link> <span class=md-ellipsis> Usage ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Executors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Executors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/reactpy/ class=md-nav__link> <span class=md-ellipsis> ReactPy </span> </a> </li> <li class=md-nav__item> <a href=../../reference/reactpy-csr/ class=md-nav__link> <span class=md-ellipsis> ReactPyCsr ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/reactpy-middleware/ class=md-nav__link> <span class=md-ellipsis> ReactPyMiddleware ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> Rules of React </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Rules of React </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/rules-of-react/ class=md-nav__link> <span class=md-ellipsis> Overview ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/components-and-hooks-must-be-pure/ class=md-nav__link> <span class=md-ellipsis> Components and Hooks must be pure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/react-calls-components-and-hooks/ class=md-nav__link> <span class=md-ellipsis> React calls Components and Hooks ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/rules-of-hooks/ class=md-nav__link> <span class=md-ellipsis> Rules of Hooks ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/protocol-structure/ class=md-nav__link> <span class=md-ellipsis> Protocol Structure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/client-api/ class=md-nav__link> <span class=md-ellipsis> Client API ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/community/ class=md-nav__link> <span class=md-ellipsis> Community ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/running-tests/ class=md-nav__link> <span class=md-ellipsis> Running Tests ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/code/ class=md-nav__link> <span class=md-ellipsis> Contributing Code ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/docs/ class=md-nav__link> <span class=md-ellipsis> Contributing Documentation ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/licenses/ class=md-nav__link> <span class=md-ellipsis> Licenses ðŸš§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#consolidate-state-logic-with-a-reducer class=md-nav__link> Consolidate state logic with a reducer </a> <nav class=md-nav aria-label="Consolidate state logic with a reducer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-move-from-setting-state-to-dispatching-actions class=md-nav__link> Step 1: Move from setting state to dispatching actions </a> </li> <li class=md-nav__item> <a href=#step-2-write-a-reducer-function class=md-nav__link> Step 2: Write a reducer function </a> <nav class=md-nav aria-label="Step 2: Write a reducer function"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#why-are-reducers-called-this-way class=md-nav__link> Why are reducers called this way? </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#step-3-use-the-reducer-from-your-component class=md-nav__link> Step 3: Use the reducer from your component </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#comparing-usestate-and-usereducer class=md-nav__link> Comparing useState and useReducer </a> </li> <li class=md-nav__item> <a href=#writing-reducers-well class=md-nav__link> Writing reducers well </a> </li> <li class=md-nav__item> <a href=#writing-concise-reducers-with-immer class=md-nav__link> Writing concise reducers with Immer </a> <nav class=md-nav aria-label="Writing concise reducers with Immer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dispatch-actions-from-event-handlers class=md-nav__link> Dispatch actions from event handlers </a> </li> <li class=md-nav__item> <a href=#clear-the-input-on-sending-a-message class=md-nav__link> Clear the input on sending a message </a> </li> <li class=md-nav__item> <a href=#restore-input-values-when-switching-between-tabs class=md-nav__link> Restore input values when switching between tabs </a> </li> <li class=md-nav__item> <a href=#implement-usereducer-from-scratch class=md-nav__link> Implement useReducer from scratch </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Extracting State Logic into a Reducer ðŸš§</h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p class=intro> Components with many state updates spread across many event handlers can get overwhelming. For these cases, you can consolidate all the state update logic outside your component in a single function, called a <em>reducer.</em> </p> <div class="admonition summary"> <p class=admonition-title>You will learn</p> <ul> <li>What a reducer function is</li> <li>How to refactor <code>useState</code> to <code>useReducer</code></li> <li>When to use a reducer</li> <li>How to write one well</li> </ul> </div> <h2 id=consolidate-state-logic-with-a-reducer>Consolidate state logic with a reducer<a class=headerlink href=#consolidate-state-logic-with-a-reducer title="Permanent link">&para;</a></h2> <p>As your components grow in complexity, it can get harder to see at a glance all the different ways in which a component's state gets updated. For example, the <code>TaskApp</code> component below holds an array of <code>tasks</code> in state and uses three different event handlers to add, remove, and edit tasks:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTask</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTask.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>setTasks</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialTasks</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTasks</span><span class=p>([</span>
<span class=w>            </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>            </span><span class=p>{</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>                </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>        </span><span class=p>]);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTasks</span><span class=p>(</span>
<span class=w>            </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>task</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTasks</span><span class=p>(</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>taskId</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Prague</span><span class=w> </span><span class=nx>itinerary</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTask</span><span class=w> </span><span class=nx>onAddTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTask</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>tasks</span><span class=o>=</span><span class=p>{</span><span class=nx>tasks</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTask</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTask</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Visit Kafka Museum&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Watch a puppet show&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lennon Wall pic&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTask</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>text</span><span class=p>,</span><span class=w> </span><span class=nx>setText</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add task&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setText</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setText</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTask</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>task</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTask</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTask</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>task</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>taskContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>taskContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Each of its event handlers calls <code>setTasks</code> in order to update the state. As this component grows, so does the amount of state logic sprinkled throughout it. To reduce this complexity and keep all your logic in one easy-to-access place, you can move that state logic into a single function outside your component, <strong>called a "reducer".</strong></p> <p>Reducers are a different way to handle state. You can migrate from <code>useState</code> to <code>useReducer</code> in three steps:</p> <ol> <li><strong>Move</strong> from setting state to dispatching actions.</li> <li><strong>Write</strong> a reducer function.</li> <li><strong>Use</strong> the reducer from your component.</li> </ol> <h3 id=step-1-move-from-setting-state-to-dispatching-actions>Step 1: Move from setting state to dispatching actions<a class=headerlink href=#step-1-move-from-setting-state-to-dispatching-actions title="Permanent link">&para;</a></h3> <p>Your event handlers currently specify <em>what to do</em> by setting state:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>setTasks</span><span class=p>([</span>
<span class=w>        </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>        </span><span class=p>{</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>            </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>        </span><span class=p>},</span>
<span class=w>    </span><span class=p>]);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>setTasks</span><span class=p>(</span>
<span class=w>        </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>task</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>})</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>setTasks</span><span class=p>(</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>taskId</span><span class=p>));</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Remove all the state setting logic. What you are left with are three event handlers:</p> <ul> <li><code>handleAddTask(text)</code> is called when the user presses "Add".</li> <li><code>handleChangeTask(task)</code> is called when the user toggles a task or presses "Save".</li> <li><code>handleDeleteTask(taskId)</code> is called when the user presses "Delete".</li> </ul> <p>Managing state with reducers is slightly different from directly setting state. Instead of telling React "what to do" by setting state, you specify "what the user just did" by dispatching "actions" from your event handlers. (The state update logic will live elsewhere!) So instead of "setting <code>tasks</code>" via an event handler, you're dispatching an "added/changed/deleted a task" action. This is more descriptive of the user's intent.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>        </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>task</span><span class=o>:</span><span class=w> </span><span class=nx>task</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>taskId</span><span class=p>,</span>
<span class=w>    </span><span class=p>});</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>The object you pass to <code>dispatch</code> is called an "action":</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>dispatch</span><span class=p>(</span>
<span class=w>        </span><span class=c1>// &quot;action&quot; object:</span>
<span class=w>        </span><span class=p>{</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>taskId</span><span class=p>,</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>It is a regular JavaScript object. You decide what to put in it, but generally it should contain the minimal information about <em>what happened</em>. (You will add the <code>dispatch</code> function itself in a later step.)</p> <p><note></p> <p>An action object can have any shape.</p> <p>By convention, it is common to give it a string <code>type</code> that describes what happened, and pass any additional information in other fields. The <code>type</code> is specific to a component, so in this example either <code>'added'</code> or <code>'added_task'</code> would be fine. Choose a name that says what happened!</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>    </span><span class=c1>// specific to component</span>
<span class=w>    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;what_happened&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=c1>// other fields go here</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p></note></p> <h3 id=step-2-write-a-reducer-function>Step 2: Write a reducer function<a class=headerlink href=#step-2-write-a-reducer-function title="Permanent link">&para;</a></h3> <p>A reducer function is where you will put your state logic. It takes two arguments, the current state and the action object, and it returns the next state:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>yourReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// return next state for React to set</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>React will set the state to what you return from the reducer.</p> <p>To move your state setting logic from your event handlers to a reducer function in this example, you will:</p> <ol> <li>Declare the current state (<code>tasks</code>) as the first argument.</li> <li>Declare the <code>action</code> object as the second argument.</li> <li>Return the <em>next</em> state from the reducer (which React will set the state to).</li> </ol> <p>Here is all the state setting logic migrated to a reducer function:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>            </span><span class=p>{</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>        </span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Because the reducer function takes state (<code>tasks</code>) as an argument, you can <strong>declare it outside of your component.</strong> This decreases the indentation level and can make your code easier to read.</p> <p><note></p> <p>The code above uses if/else statements, but it's a convention to use <a href=https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/switch>switch statements</a> inside reducers. The result is the same, but it can be easier to read switch statements at a glance.</p> <p>We'll be using them throughout the rest of this documentation like so:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>                </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>];</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>We recommend wrapping each <code>case</code> block into the <code>{</code> and <code>}</code> curly braces so that variables declared inside of different <code>case</code>s don't clash with each other. Also, a <code>case</code> should usually end with a <code>return</code>. If you forget to <code>return</code>, the code will "fall through" to the next <code>case</code>, which can lead to mistakes!</p> <p>If you're not yet comfortable with switch statements, using if/else is completely fine.</p> <p></note></p> <p><deepdive></p> <h4 id=why-are-reducers-called-this-way>Why are reducers called this way?<a class=headerlink href=#why-are-reducers-called-this-way title="Permanent link">&para;</a></h4> <p>Although reducers can "reduce" the amount of code inside your component, they are actually named after the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce><code>reduce()</code></a> operation that you can perform on arrays.</p> <p>The <code>reduce()</code> operation lets you take an array and "accumulate" a single value out of many:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code>const arr = [1, 2, 3, 4, 5];
const sum = arr.reduce(
  (result, number) =&gt; result + number
); // 1 + 2 + 3 + 4 + 5
</code></pre></div></td></tr></table></div> <p>The function you pass to <code>reduce</code> is known as a "reducer". It takes the <em>result so far</em> and the <em>current item,</em> then it returns the <em>next result.</em> React reducers are an example of the same idea: they take the <em>state so far</em> and the <em>action</em>, and return the <em>next state.</em> In this way, they accumulate actions over time into state.</p> <p>You could even use the <code>reduce()</code> method with an <code>initialState</code> and an array of <code>actions</code> to calculate the final state by passing your reducer function to it:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>tasksReducer</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./tasksReducer.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[];</span>
<span class=kd>let</span><span class=w> </span><span class=nx>actions</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Visit Kafka Museum&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Watch a puppet show&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>3</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lennon Wall pic&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=kd>let</span><span class=w> </span><span class=nx>finalState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>actions</span><span class=p>.</span><span class=nx>reduce</span><span class=p>(</span><span class=nx>tasksReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>

<span class=kd>const</span><span class=w> </span><span class=nx>output</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&quot;output&quot;</span><span class=p>);</span>
<span class=nx>output</span><span class=p>.</span><span class=nx>textContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>finalState</span><span class=p>,</span><span class=w> </span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=mf>2</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>                </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>];</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>&lt;</span><span class=nt>pre</span> <span class=na>id</span><span class=o>=</span><span class=s>&quot;output&quot;</span><span class=p>&gt;&lt;/</span><span class=nt>pre</span><span class=p>&gt;</span>
</code></pre></div></td></tr></table></div> <p>You probably won't need to do this yourself, but this is similar to what React does!</p> <p></deepdive></p> <h3 id=step-3-use-the-reducer-from-your-component>Step 3: Use the reducer from your component<a class=headerlink href=#step-3-use-the-reducer-from-your-component title="Permanent link">&para;</a></h3> <p>Finally, you need to hook up the <code>tasksReducer</code> to your component. Import the <code>useReducer</code> Hook from React:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
</code></pre></div></td></tr></table></div> <p>Then you can replace <code>useState</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>setTasks</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialTasks</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>with <code>useReducer</code> like so:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>tasksReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialTasks</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>The <code>useReducer</code> Hook is similar to <code>useState</code>â€”you must pass it an initial state and it returns a stateful value and a way to set state (in this case, the dispatch function). But it's a little different.</p> <p>The <code>useReducer</code> Hook takes two arguments:</p> <ol> <li>A reducer function</li> <li>An initial state</li> </ol> <p>And it returns:</p> <ol> <li>A stateful value</li> <li>A dispatch function (to "dispatch" user actions to the reducer)</li> </ol> <p>Now it's fully wired up! Here, the reducer is declared at the bottom of the component file:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTask</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTask.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>tasksReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialTasks</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>task</span><span class=o>:</span><span class=w> </span><span class=nx>task</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>taskId</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Prague</span><span class=w> </span><span class=nx>itinerary</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTask</span><span class=w> </span><span class=nx>onAddTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTask</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>tasks</span><span class=o>=</span><span class=p>{</span><span class=nx>tasks</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTask</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTask</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>                </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>];</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Visit Kafka Museum&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Watch a puppet show&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lennon Wall pic&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTask</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>text</span><span class=p>,</span><span class=w> </span><span class=nx>setText</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add task&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setText</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setText</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTask</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>task</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTask</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTask</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>task</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>taskContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>taskContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>If you want, you can even move the reducer to a different file:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTask</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTask.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>tasksReducer</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./tasksReducer.js&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>tasksReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialTasks</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>task</span><span class=o>:</span><span class=w> </span><span class=nx>task</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>taskId</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Prague</span><span class=w> </span><span class=nx>itinerary</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTask</span><span class=w> </span><span class=nx>onAddTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTask</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>tasks</span><span class=o>=</span><span class=p>{</span><span class=nx>tasks</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTask</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTask</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Visit Kafka Museum&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Watch a puppet show&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lennon Wall pic&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>[</span>
<span class=w>                </span><span class=p>...</span><span class=nx>tasks</span><span class=p>,</span>
<span class=w>                </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>];</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>tasks</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTask</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>text</span><span class=p>,</span><span class=w> </span><span class=nx>setText</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add task&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setText</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setText</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTask</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>task</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTask</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTask</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>task</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>taskContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>taskContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Component logic can be easier to read when you separate concerns like this. Now the event handlers only specify <em>what happened</em> by dispatching actions, and the reducer function determines <em>how the state updates</em> in response to them.</p> <h2 id=comparing-usestate-and-usereducer>Comparing <code>useState</code> and <code>useReducer</code><a class=headerlink href=#comparing-usestate-and-usereducer title="Permanent link">&para;</a></h2> <p>Reducers are not without downsides! Here's a few ways you can compare them:</p> <ul> <li><strong>Code size:</strong> Generally, with <code>useState</code> you have to write less code upfront. With <code>useReducer</code>, you have to write both a reducer function <em>and</em> dispatch actions. However, <code>useReducer</code> can help cut down on the code if many event handlers modify state in a similar way.</li> <li><strong>Readability:</strong> <code>useState</code> is very easy to read when the state updates are simple. When they get more complex, they can bloat your component's code and make it difficult to scan. In this case, <code>useReducer</code> lets you cleanly separate the <em>how</em> of update logic from the <em>what happened</em> of event handlers.</li> <li><strong>Debugging:</strong> When you have a bug with <code>useState</code>, it can be difficult to tell <em>where</em> the state was set incorrectly, and <em>why</em>. With <code>useReducer</code>, you can add a console log into your reducer to see every state update, and <em>why</em> it happened (due to which <code>action</code>). If each <code>action</code> is correct, you'll know that the mistake is in the reducer logic itself. However, you have to step through more code than with <code>useState</code>.</li> <li><strong>Testing:</strong> A reducer is a pure function that doesn't depend on your component. This means that you can export and test it separately in isolation. While generally it's best to test components in a more realistic environment, for complex state update logic it can be useful to assert that your reducer returns a particular state for a particular initial state and action.</li> <li><strong>Personal preference:</strong> Some people like reducers, others don't. That's okay. It's a matter of preference. You can always convert between <code>useState</code> and <code>useReducer</code> back and forth: they are equivalent!</li> </ul> <p>We recommend using a reducer if you often encounter bugs due to incorrect state updates in some component, and want to introduce more structure to its code. You don't have to use reducers for everything: feel free to mix and match! You can even <code>useState</code> and <code>useReducer</code> in the same component.</p> <h2 id=writing-reducers-well>Writing reducers well<a class=headerlink href=#writing-reducers-well title="Permanent link">&para;</a></h2> <p>Keep these two tips in mind when writing reducers:</p> <ul> <li><strong>Reducers must be pure.</strong> Similar to <a href=/learn/queueing-a-series-of-state-updates>state updater functions</a>, reducers run during rendering! (Actions are queued until the next render.) This means that reducers <a href=/learn/keeping-components-pure>must be pure</a>â€”same inputs always result in the same output. They should not send requests, schedule timeouts, or perform any side effects (operations that impact things outside the component). They should update <a href=/learn/updating-objects-in-state>objects</a> and <a href=/learn/updating-arrays-in-state>arrays</a> without mutations.</li> <li><strong>Each action describes a single user interaction, even if that leads to multiple changes in the data.</strong> For example, if a user presses "Reset" on a form with five fields managed by a reducer, it makes more sense to dispatch one <code>reset_form</code> action rather than five separate <code>set_field</code> actions. If you log every action in a reducer, that log should be clear enough for you to reconstruct what interactions or responses happened in what order. This helps with debugging!</li> </ul> <h2 id=writing-concise-reducers-with-immer>Writing concise reducers with Immer<a class=headerlink href=#writing-concise-reducers-with-immer title="Permanent link">&para;</a></h2> <p>Just like with <a href=/learn/updating-objects-in-state#write-concise-update-logic-with-immer>updating objects</a> and <a href=/learn/updating-arrays-in-state#write-concise-update-logic-with-immer>arrays</a> in regular state, you can use the Immer library to make reducers more concise. Here, <a href=https://github.com/immerjs/use-immer#useimmerreducer><code>useImmerReducer</code></a> lets you mutate the state with <code>push</code> or <code>arr[i] =</code> assignment:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useImmerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;use-immer&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTask</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTask.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>function</span><span class=w> </span><span class=nx>tasksReducer</span><span class=p>(</span><span class=nx>draft</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>draft</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>text</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>            </span><span class=k>break</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>            </span><span class=nx>draft</span><span class=p>[</span><span class=nx>index</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>task</span><span class=p>;</span>
<span class=w>            </span><span class=k>break</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useImmerReducer</span><span class=p>(</span><span class=nx>tasksReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialTasks</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;added&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>text</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTask</span><span class=p>(</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>task</span><span class=o>:</span><span class=w> </span><span class=nx>task</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTask</span><span class=p>(</span><span class=nx>taskId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>            </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;deleted&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>taskId</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Prague</span><span class=w> </span><span class=nx>itinerary</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTask</span><span class=w> </span><span class=nx>onAddTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTask</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>tasks</span><span class=o>=</span><span class=p>{</span><span class=nx>tasks</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTask</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTask</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTask</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTasks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Visit Kafka Museum&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Watch a puppet show&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lennon Wall pic&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTask</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>text</span><span class=p>,</span><span class=w> </span><span class=nx>setText</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add task&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setText</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setText</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTask</span><span class=p>(</span><span class=nx>text</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>tasks</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTask</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTask</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>tasks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>task</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>task</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTask</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTask</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>task</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>taskContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>text</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>taskContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>text</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>task</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>task</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>taskContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.7.3&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-dom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;use-immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.5.1&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;build&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts build&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;test&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts test --env=jsdom&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;eject&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts eject&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Reducers must be pure, so they shouldn't mutate state. But Immer provides you with a special <code>draft</code> object which is safe to mutate. Under the hood, Immer will create a copy of your state with the changes you made to the <code>draft</code>. This is why reducers managed by <code>useImmerReducer</code> can mutate their first argument and don't need to return state.</p> <p><recap></p> <ul> <li>To convert from <code>useState</code> to <code>useReducer</code>:<ol> <li>Dispatch actions from event handlers.</li> <li>Write a reducer function that returns the next state for a given state and action.</li> <li>Replace <code>useState</code> with <code>useReducer</code>.</li> </ol> </li> <li>Reducers require you to write a bit more code, but they help with debugging and testing.</li> <li>Reducers must be pure.</li> <li>Each action describes a single user interaction.</li> <li>Use Immer if you want to write reducers in a mutating style.</li> </ul> <p></recap></p> <p><challenges></p> <h4 id=dispatch-actions-from-event-handlers>Dispatch actions from event handlers<a class=headerlink href=#dispatch-actions-from-event-handlers title="Permanent link">&para;</a></h4> <p>Currently, the event handlers in <code>ContactList.js</code> and <code>Chat.js</code> have <code>// TODO</code> comments. This is why typing into the input doesn't work, and clicking on the buttons doesn't change the selected recipient.</p> <p>Replace these two <code>// TODO</code>s with the code to <code>dispatch</code> the corresponding actions. To see the expected shape and the type of the actions, check the reducer in <code>messengerReducer.js</code>. The reducer is already written so you won't need to change it. You only need to dispatch the actions in <code>ContactList.js</code> and <code>Chat.js</code>.</p> <p><hint></p> <p>The <code>dispatch</code> function is already available in both of these components because it was passed as a prop. So you need to call <code>dispatch</code> with the corresponding action object.</p> <p>To check the action object shape, you can look at the reducer and see which <code>action</code> fields it expects to see. For example, the <code>changed_selection</code> case in the reducer looks like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>case</span><span class=w> </span><span class=s1>&#39;changed_selection&#39;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span>
<span class=w>  </span><span class=p>};</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>This means that your action object should have a <code>type: 'changed_selection'</code>. You also see the <code>action.contactId</code> being used, so you need to include a <code>contactId</code> property into your action.</p> <p></hint></p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=c1>// TODO: dispatch changed_selection</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// TODO: dispatch edited_message</span>
<span class=w>                    </span><span class=c1>// (Read the input value from e.target.value)</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>From the reducer code, you can infer that actions need to look like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// When the user presses &quot;Alice&quot;</span>
<span class=nx>dispatch</span><span class=p>({</span>
<span class=w>    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=p>});</span>

<span class=c1>// When user types &quot;Hello!&quot;</span>
<span class=nx>dispatch</span><span class=p>({</span>
<span class=w>    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello!&quot;</span><span class=p>,</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>Here is the example updated to dispatch the corresponding messages:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p></solution></p> <h4 id=clear-the-input-on-sending-a-message>Clear the input on sending a message<a class=headerlink href=#clear-the-input-on-sending-a-message title="Permanent link">&para;</a></h4> <p>Currently, pressing "Send" doesn't do anything. Add an event handler to the "Send" button that will:</p> <ol> <li>Show an <code>alert</code> with the recipient's email and the message.</li> <li>Clear the message input.</li> </ol> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>There are a couple of ways you could do it in the "Send" button event handler. One approach is to show an alert and then dispatch an <code>edited_message</code> action with an empty <code>message</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>This works and clears the input when you hit "Send".</p> <p>However, <em>from the user's perspective</em>, sending a message is a different action than editing the field. To reflect that, you could instead create a <em>new</em> action called <code>sent_message</code>, and handle it separately in the reducer:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>The resulting behavior is the same. But keep in mind that action types should ideally describe "what the user did" rather than "how you want the state to change". This makes it easier to later add more features.</p> <p>With either solution, it's important that you <strong>don't</strong> place the <code>alert</code> inside a reducer. The reducer should be a pure function--it should only calculate the next state. It should not "do" anything, including displaying messages to the user. That should happen in the event handler. (To help catch mistakes like this, React will call your reducers multiple times in Strict Mode. This is why, if you put an alert in a reducer, it fires twice.)</p> <p></solution></p> <h4 id=restore-input-values-when-switching-between-tabs>Restore input values when switching between tabs<a class=headerlink href=#restore-input-values-when-switching-between-tabs title="Permanent link">&para;</a></h4> <p>In this example, switching between different recipients always clears the text input:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>case</span><span class=w> </span><span class=s1>&#39;changed_selection&#39;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w> </span><span class=c1>// Clears the input</span>
<span class=w>  </span><span class=p>};</span>
</code></pre></div></td></tr></table></div> <p>This is because you don't want to share a single message draft between several recipients. But it would be better if your app "remembered" a draft for each contact separately, restoring them when you switch contacts.</p> <p>Your task is to change the way the state is structured so that you remember a separate message draft <em>per contact</em>. You would need to make a few changes to the reducer, the initial state, and the components.</p> <p><hint></p> <p>You can structure your state like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=mf>0</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=c1>// Draft for contactId = 0</span>
<span class=w>        </span><span class=mf>1</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=c1>// Draft for contactId = 1</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>};</span>
</code></pre></div></td></tr></table></div> <p>The <code>[key]: value</code> <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#computed_property_names>computed property</a> syntax can help you update the <code>messages</code> object:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>  </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>  </span><span class=p>[</span><span class=nx>id</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>message</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p></hint></p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>message</span><span class=p>;</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span><span class=p>,</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>You'll need to update the reducer to store and update a separate message draft per contact:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span></pre></div></td><td class=code><div><pre><span></span><code><span class=c1>// When the input is edited</span>
<span class=k>case</span><span class=w> </span><span class=s1>&#39;edited_message&#39;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>// Keep other state like selection</span>
<span class=w>    </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>    </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=c1>// Keep messages for other contacts</span>
<span class=w>      </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>      </span><span class=c1>// But change the selected contact&#39;s message</span>
<span class=w>      </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>  </span><span class=p>};</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>You would also update the <code>Messenger</code> component to read the message for the currently selected contact:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>];</span>
</code></pre></div></td></tr></table></div> <p>Here is the complete solution:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>];</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=mf>0</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Taylor&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>1</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Alice&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>2</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Bob&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Notably, you didn't need to change any of the event handlers to implement this different behavior. Without a reducer, you would have to change every event handler that updates the state.</p> <p></solution></p> <h4 id=implement-usereducer-from-scratch>Implement <code>useReducer</code> from scratch<a class=headerlink href=#implement-usereducer-from-scratch title="Permanent link">&para;</a></h4> <p>In the earlier examples, you imported the <code>useReducer</code> Hook from React. This time, you will implement <em>the <code>useReducer</code> Hook itself!</em> Here is a stub to get you started. It shouldn't take more than 10 lines of code.</p> <p>To test your changes, try typing into the input or select a contact.</p> <p><hint></p> <p>Here is a more detailed sketch of the implementation:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>reducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>setState</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>dispatch</span><span class=p>(</span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// ???</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>];</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Recall that a reducer function takes two arguments--the current state and the action object--and it returns the next state. What should your <code>dispatch</code> implementation do with it?</p> <p></hint></p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./MyReact.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>];</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=mf>0</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Taylor&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>1</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Alice&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>2</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Bob&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>reducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>setState</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span>

<span class=w>    </span><span class=c1>// ???</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>];</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>Dispatching an action calls a reducer with the current state and the action, and stores the result as the next state. This is what it looks like in code:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./MyReact.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>Chat</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./Chat.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>ContactList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./ContactList.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>initialState</span><span class=p>,</span><span class=w> </span><span class=nx>messengerReducer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./messengerReducer&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Messenger</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>messengerReducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>];</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>contact</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>contacts</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>c</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ContactList</span>
<span class=w>                </span><span class=nx>contacts</span><span class=o>=</span><span class=p>{</span><span class=nx>contacts</span><span class=p>}</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>=</span><span class=p>{</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Chat</span>
<span class=w>                </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                </span><span class=nx>message</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>contact</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>}</span>
<span class=w>                </span><span class=nx>dispatch</span><span class=o>=</span><span class=p>{</span><span class=nx>dispatch</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/div&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>const</span><span class=w> </span><span class=nx>contacts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Taylor&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;taylor@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Alice&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;alice@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bob&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;bob@mail.com&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>initialState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>    </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=mf>0</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Taylor&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>1</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Alice&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=mf>2</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Hello, Bob&quot;</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>};</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>messengerReducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>selectedId</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>contactId</span><span class=p>,</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>message</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>case</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=p>...</span><span class=nx>state</span><span class=p>,</span>
<span class=w>                </span><span class=nx>messages</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>state</span><span class=p>.</span><span class=nx>messages</span><span class=p>,</span>
<span class=w>                    </span><span class=p>[</span><span class=nx>state</span><span class=p>.</span><span class=nx>selectedId</span><span class=p>]</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>                </span><span class=p>},</span>
<span class=w>            </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s2>&quot;Unknown action: &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>action</span><span class=p>.</span><span class=nx>type</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>useReducer</span><span class=p>(</span><span class=nx>reducer</span><span class=p>,</span><span class=w> </span><span class=nx>initialState</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>setState</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialState</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>dispatch</span><span class=p>(</span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>nextState</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>reducer</span><span class=p>(</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>);</span>
<span class=w>        </span><span class=nx>setState</span><span class=p>(</span><span class=nx>nextState</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>[</span><span class=nx>state</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=p>];</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ContactList</span><span class=p>({</span><span class=w> </span><span class=nx>contacts</span><span class=p>,</span><span class=w> </span><span class=nx>selectedId</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;contact-list&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>contacts</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>contact</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                                    </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;changed_selection&quot;</span><span class=p>,</span>
<span class=w>                                    </span><span class=nx>contactId</span><span class=o>:</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span>
<span class=w>                                </span><span class=p>});</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=p>{</span><span class=nx>selectedId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;</span>
<span class=w>                            </span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span>
<span class=w>                                </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span>
<span class=w>                            </span><span class=p>)}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>Chat</span><span class=p>({</span><span class=w> </span><span class=nx>contact</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>,</span><span class=w> </span><span class=nx>dispatch</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>section</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>&quot;chat&quot;</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>textarea</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>message</span><span class=p>}</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;Chat to &quot;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>contact</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;edited_message&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>message</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>br</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>alert</span><span class=p>(</span><span class=sb>`Sending &quot;</span><span class=si>${</span><span class=nx>message</span><span class=si>}</span><span class=sb>&quot; to </span><span class=si>${</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>dispatch</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;sent_message&quot;</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Send</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=p>{</span><span class=nx>contact</span><span class=p>.</span><span class=nx>email</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/section&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>.</span><span class=nc>chat</span><span class=o>,</span>
<span class=p>.</span><span class=nc>contact-list</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>float</span><span class=p>:</span><span class=w> </span><span class=kc>left</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-bottom</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=w>    </span><span class=k>margin-right</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>textarea</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>150</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Though it doesn't matter in most cases, a slightly more accurate implementation looks like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>function</span><span class=w> </span><span class=nx>dispatch</span><span class=p>(</span><span class=nx>action</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=nx>setState</span><span class=p>((</span><span class=nx>s</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>reducer</span><span class=p>(</span><span class=nx>s</span><span class=p>,</span><span class=w> </span><span class=nx>action</span><span class=p>));</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>This is because the dispatched actions are queued until the next render, <a href=/learn/queueing-a-series-of-state-updates>similar to the updater functions.</a></p> <p></solution></p> <p></challenges></p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="August 28, 2023 08:11:22">August 28, 2023</span> </small> </div> <div class=md-source-date> <small> Authors: <span class="git-page-authors git-authors"><a href=mailto:16909269+archmonger@users.noreply.github.com>Archmonger</a></span> </small> </div> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy;<div id=year> </div> <script> document.getElementById("year").innerHTML = new Date().getFullYear(); </script>Reactive Python and affiliates.<div class=legal-footer-right>This project has no affiliation to ReactJS or Meta Platforms, Inc.</div> </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.code.copy", "search.highlight"], "search": "../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.4e0fa4ba.min.js></script> <script src=../../assets/js/main.js></script> </body> </html>