<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="It's React, but in Python."><meta name=author content=Archmonger><link href=https://reactive-python.github.io/reactpy/learn/updating-arrays-in-state/ rel=canonical><link href=../updating-objects-in-state/ rel=prev><link href=../reacting-to-input-with-state/ rel=next><link rel=icon href=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.0"><title>Updating Arrays in State ðŸš§ - ReactPy</title><link rel=stylesheet href=../../assets/stylesheets/main.9f615399.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.649f08f9.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h224V368c0-26.5 21.5-48 48-48h112V96c0-35.3-28.7-64-64-64H64zm384 320H336c-8.8 0-16 7.2-16 16v112l32-32 64-64 32-32z"/></svg>');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../assets/css/main.css><link rel=stylesheet href=../../assets/css/button.css><link rel=stylesheet href=../../assets/css/admonition.css><link rel=stylesheet href=../../assets/css/banner.css><link rel=stylesheet href=../../assets/css/sidebar.css><link rel=stylesheet href=../../assets/css/navbar.css><link rel=stylesheet href=../../assets/css/table-of-contents.css><link rel=stylesheet href=../../assets/css/code.css><link rel=stylesheet href=../../assets/css/footer.css><link rel=stylesheet href=../../assets/css/home.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest release. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=ReactPy class="md-header__button md-logo" aria-label=ReactPy data-md-component=logo> <img src=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ReactPy </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Updating Arrays in State ðŸš§ </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=red aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81 1.42-1.42M1 13h3v-2H1m12 9h-2v3h2"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/reactive-python/reactpy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ReactPy </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../quick-start/ class=md-tabs__link> Get Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../your-first-component/ class=md-tabs__link> Learn </a> </li> <li class=md-tabs__item> <a href=../../reference/overview/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../about/changelog/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=ReactPy class="md-nav__button md-logo" aria-label=ReactPy data-md-component=logo> <img src=https://raw.githubusercontent.com/reactive-python/reactpy/main/branding/svg/reactpy-logo-square.svg alt=logo> </a> ReactPy </label> <div class=md-nav__source> <a href=https://github.com/reactive-python/reactpy title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> ReactPy </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Get Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Get Started </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> Quick Start </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> Quick Start </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick start </span> </a> </li> <li class=md-nav__item> <a href=../tutorial-tic-tac-toe/ class=md-nav__link> <span class=md-ellipsis> Tutorial: Tic-Tac-Toe ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../thinking-in-react/ class=md-nav__link> <span class=md-ellipsis> Thinking in React </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Installation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../creating-a-react-app/ class=md-nav__link> <span class=md-ellipsis> Creating a Standalone React App </span> </a> </li> <li class=md-nav__item> <a href=../add-react-to-an-existing-project/ class=md-nav__link> <span class=md-ellipsis> Add React to an Existing Project </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../editor-setup/ class=md-nav__link> <span class=md-ellipsis> Editor Setup </span> </a> </li> <li class=md-nav__item> <a href=../tools-and-packages/ class=md-nav__link> <span class=md-ellipsis> Tools, Libraries, and Packages </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Learn </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Learn </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Describing the UI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Describing the UI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../your-first-component/ class=md-nav__link> <span class=md-ellipsis> Your First Component ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../importing-and-exporting-components/ class=md-nav__link> <span class=md-ellipsis> Importing and Exporting Components ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../passing-props-to-a-component/ class=md-nav__link> <span class=md-ellipsis> Passing Props to a Component ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../conditional-rendering/ class=md-nav__link> <span class=md-ellipsis> Conditional Rendering ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../rendering-lists/ class=md-nav__link> <span class=md-ellipsis> Rendering Lists ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../keeping-components-pure/ class=md-nav__link> <span class=md-ellipsis> Keeping Components Pure ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2 checked> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Adding Interactivity </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Adding Interactivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../responding-to-events/ class=md-nav__link> <span class=md-ellipsis> Responding to Events ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../state-a-components-memory/ class=md-nav__link> <span class=md-ellipsis> State: A Component's Memory ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../render-and-commit/ class=md-nav__link> <span class=md-ellipsis> Render and Commit ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../state-as-a-snapshot/ class=md-nav__link> <span class=md-ellipsis> State as a Snapshot ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../queueing-a-series-of-state-updates/ class=md-nav__link> <span class=md-ellipsis> Queueing a Series of State Updates ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../updating-objects-in-state/ class=md-nav__link> <span class=md-ellipsis> Updating Objects in State ðŸš§ </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Updating Arrays in State ðŸš§ </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Updating Arrays in State ðŸš§ </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#updating-arrays-without-mutation class=md-nav__link> Updating arrays without mutation </a> <nav class=md-nav aria-label="Updating arrays without mutation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-to-an-array class=md-nav__link> Adding to an array </a> </li> <li class=md-nav__item> <a href=#removing-from-an-array class=md-nav__link> Removing from an array </a> </li> <li class=md-nav__item> <a href=#transforming-an-array class=md-nav__link> Transforming an array </a> </li> <li class=md-nav__item> <a href=#replacing-items-in-an-array class=md-nav__link> Replacing items in an array </a> </li> <li class=md-nav__item> <a href=#inserting-into-an-array class=md-nav__link> Inserting into an array </a> </li> <li class=md-nav__item> <a href=#making-other-changes-to-an-array class=md-nav__link> Making other changes to an array </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#updating-objects-inside-arrays class=md-nav__link> Updating objects inside arrays </a> <nav class=md-nav aria-label="Updating objects inside arrays"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#write-concise-update-logic-with-immer class=md-nav__link> Write concise update logic with Immer </a> <nav class=md-nav aria-label="Write concise update logic with Immer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#update-an-item-in-the-shopping-cart class=md-nav__link> Update an item in the shopping cart </a> </li> <li class=md-nav__item> <a href=#remove-an-item-from-the-shopping-cart class=md-nav__link> Remove an item from the shopping cart </a> </li> <li class=md-nav__item> <a href=#fix-the-mutations-using-non-mutative-methods class=md-nav__link> Fix the mutations using non-mutative methods </a> </li> <li class=md-nav__item> <a href=#fix-the-mutations-using-immer class=md-nav__link> Fix the mutations using Immer </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Managing State </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Managing State </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../reacting-to-input-with-state/ class=md-nav__link> <span class=md-ellipsis> Reacting to Input with State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../choosing-the-state-structure/ class=md-nav__link> <span class=md-ellipsis> Choosing the State Structure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../sharing-state-between-components/ class=md-nav__link> <span class=md-ellipsis> Sharing State Between Components ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../preserving-and-resetting-state/ class=md-nav__link> <span class=md-ellipsis> Preserving and Resetting State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../extracting-state-logic-into-a-reducer/ class=md-nav__link> <span class=md-ellipsis> Extracting State Logic into a Reducer ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../passing-data-deeply-with-context/ class=md-nav__link> <span class=md-ellipsis> Passing Data Deeply with Context ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../scaling-up-with-reducer-and-context/ class=md-nav__link> <span class=md-ellipsis> Scaling Up with Reducer and Context ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Escape Hatches </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Escape Hatches </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../referencing-values-with-refs/ class=md-nav__link> <span class=md-ellipsis> Referencing Values with Refs ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../manipulating-the-dom-with-refs/ class=md-nav__link> <span class=md-ellipsis> Manipulating the DOM with Refs ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../synchronizing-with-effects/ class=md-nav__link> <span class=md-ellipsis> Synchronizing with Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../you-might-not-need-an-effect/ class=md-nav__link> <span class=md-ellipsis> You Might Not Need an Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../lifecycle-of-reactive-effects/ class=md-nav__link> <span class=md-ellipsis> Lifecycle of Reactive Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../separating-events-from-effects/ class=md-nav__link> <span class=md-ellipsis> Separating Events from Effects ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../removing-effect-dependencies/ class=md-nav__link> <span class=md-ellipsis> Removing Effect Dependencies ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../reusing-logic-with-custom-hooks/ class=md-nav__link> <span class=md-ellipsis> Reusing Logic with Custom Hooks ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../communicate-data-between-server-and-client/ class=md-nav__link> <span class=md-ellipsis> Communicating Data Between Server and Client ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../convert-between-vdom-and-html/ class=md-nav__link> <span class=md-ellipsis> Convert Between VDOM and HTML ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../vdom-mutations/ class=md-nav__link> <span class=md-ellipsis> VDOM Mutations ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-vdom-event-handlers/ class=md-nav__link> <span class=md-ellipsis> Creating VDOM Event Handlers ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-html-tags/ class=md-nav__link> <span class=md-ellipsis> Creating HTML Tags ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../creating-backends/ class=md-nav__link> <span class=md-ellipsis> Creating Backends ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../manually-register-a-client/ class=md-nav__link> <span class=md-ellipsis> Manually Register a Client ðŸš§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Hooks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Hooks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/use-state/ class=md-nav__link> <span class=md-ellipsis> Use State ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-effect/ class=md-nav__link> <span class=md-ellipsis> Use Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-async-effect/ class=md-nav__link> <span class=md-ellipsis> Use Async Effect ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-context/ class=md-nav__link> <span class=md-ellipsis> Use Context ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-reducer/ class=md-nav__link> <span class=md-ellipsis> Use Reducer ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-callback/ class=md-nav__link> <span class=md-ellipsis> Use Callback ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-memo/ class=md-nav__link> <span class=md-ellipsis> Use Memo ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-ref/ class=md-nav__link> <span class=md-ellipsis> Use Ref ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-debug-value/ class=md-nav__link> <span class=md-ellipsis> Use Debug Value ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-connection/ class=md-nav__link> <span class=md-ellipsis> Use Connection ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-scope/ class=md-nav__link> <span class=md-ellipsis> Use Scope ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/use-location/ class=md-nav__link> <span class=md-ellipsis> Use Location ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> HTML Tags </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> HTML Tags </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/common-props/ class=md-nav__link> <span class=md-ellipsis> Common Props ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/usage/ class=md-nav__link> <span class=md-ellipsis> Usage ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Executors </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Executors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/reactpy/ class=md-nav__link> <span class=md-ellipsis> ReactPy </span> </a> </li> <li class=md-nav__item> <a href=../../reference/reactpy-csr/ class=md-nav__link> <span class=md-ellipsis> ReactPyCsr ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/reactpy-middleware/ class=md-nav__link> <span class=md-ellipsis> ReactPyMiddleware ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> Rules of React </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Rules of React </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/rules-of-react/ class=md-nav__link> <span class=md-ellipsis> Overview ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/components-and-hooks-must-be-pure/ class=md-nav__link> <span class=md-ellipsis> Components and Hooks must be pure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/react-calls-components-and-hooks/ class=md-nav__link> <span class=md-ellipsis> React calls Components and Hooks ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/rules-of-hooks/ class=md-nav__link> <span class=md-ellipsis> Rules of Hooks ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex=0> <span class=md-ellipsis> Template Tags </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Template Tags </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/jinja/ class=md-nav__link> <span class=md-ellipsis> Jinja ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/protocol-structure/ class=md-nav__link> <span class=md-ellipsis> Protocol Structure ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../reference/client-api/ class=md-nav__link> <span class=md-ellipsis> Client API ðŸš§ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/community/ class=md-nav__link> <span class=md-ellipsis> Community ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/running-tests/ class=md-nav__link> <span class=md-ellipsis> Running Tests ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/code/ class=md-nav__link> <span class=md-ellipsis> Contributing Code ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/docs/ class=md-nav__link> <span class=md-ellipsis> Contributing Documentation ðŸš§ </span> </a> </li> <li class=md-nav__item> <a href=../../about/licenses/ class=md-nav__link> <span class=md-ellipsis> Licenses ðŸš§ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#updating-arrays-without-mutation class=md-nav__link> Updating arrays without mutation </a> <nav class=md-nav aria-label="Updating arrays without mutation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-to-an-array class=md-nav__link> Adding to an array </a> </li> <li class=md-nav__item> <a href=#removing-from-an-array class=md-nav__link> Removing from an array </a> </li> <li class=md-nav__item> <a href=#transforming-an-array class=md-nav__link> Transforming an array </a> </li> <li class=md-nav__item> <a href=#replacing-items-in-an-array class=md-nav__link> Replacing items in an array </a> </li> <li class=md-nav__item> <a href=#inserting-into-an-array class=md-nav__link> Inserting into an array </a> </li> <li class=md-nav__item> <a href=#making-other-changes-to-an-array class=md-nav__link> Making other changes to an array </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#updating-objects-inside-arrays class=md-nav__link> Updating objects inside arrays </a> <nav class=md-nav aria-label="Updating objects inside arrays"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#write-concise-update-logic-with-immer class=md-nav__link> Write concise update logic with Immer </a> <nav class=md-nav aria-label="Write concise update logic with Immer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#update-an-item-in-the-shopping-cart class=md-nav__link> Update an item in the shopping cart </a> </li> <li class=md-nav__item> <a href=#remove-an-item-from-the-shopping-cart class=md-nav__link> Remove an item from the shopping cart </a> </li> <li class=md-nav__item> <a href=#fix-the-mutations-using-non-mutative-methods class=md-nav__link> Fix the mutations using non-mutative methods </a> </li> <li class=md-nav__item> <a href=#fix-the-mutations-using-immer class=md-nav__link> Fix the mutations using Immer </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Updating Arrays in State ðŸš§</h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p class=intro> Arrays are mutable in JavaScript, but you should treat them as immutable when you store them in state. Just like with objects, when you want to update an array stored in state, you need to create a new one (or make a copy of an existing one), and then set state to use the new array. </p> <div class="admonition summary"> <p class=admonition-title>You will learn</p> <ul> <li>How to add, remove, or change items in an array in React state</li> <li>How to update an object inside of an array</li> <li>How to make array copying less repetitive with Immer</li> </ul> </div> <h2 id=updating-arrays-without-mutation>Updating arrays without mutation<a class=headerlink href=#updating-arrays-without-mutation title="Permanent link">&para;</a></h2> <p>In JavaScript, arrays are just another kind of object. <a href=/learn/updating-objects-in-state>Like with objects</a>, <strong>you should treat arrays in React state as read-only.</strong> This means that you shouldn't reassign items inside an array like <code>arr[0] = 'bird'</code>, and you also shouldn't use methods that mutate the array, such as <code>push()</code> and <code>pop()</code>.</p> <p>Instead, every time you want to update an array, you'll want to pass a <em>new</em> array to your state setting function. To do that, you can create a new array from the original array in your state by calling its non-mutating methods like <code>filter()</code> and <code>map()</code>. Then you can set your state to the resulting new array.</p> <p>Here is a reference table of common array operations. When dealing with arrays inside React state, you will need to avoid the methods in the left column, and instead prefer the methods in the right column:</p> <table> <thead> <tr> <th></th> <th>avoid (mutates the array)</th> <th>prefer (returns a new array)</th> </tr> </thead> <tbody> <tr> <td>adding</td> <td><code>push</code>, <code>unshift</code></td> <td><code>concat</code>, <code>[...arr]</code> spread syntax (<a href=#adding-to-an-array>example</a>)</td> </tr> <tr> <td>removing</td> <td><code>pop</code>, <code>shift</code>, <code>splice</code></td> <td><code>filter</code>, <code>slice</code> (<a href=#removing-from-an-array>example</a>)</td> </tr> <tr> <td>replacing</td> <td><code>splice</code>, <code>arr[i] = ...</code> assignment</td> <td><code>map</code> (<a href=#replacing-items-in-an-array>example</a>)</td> </tr> <tr> <td>sorting</td> <td><code>reverse</code>, <code>sort</code></td> <td>copy the array first (<a href=#making-other-changes-to-an-array>example</a>)</td> </tr> </tbody> </table> <p>Alternatively, you can <a href=#write-concise-update-logic-with-immer>use Immer</a> which lets you use methods from both columns.</p> <p><pitfall></p> <p>Unfortunately, <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice><code>slice</code></a> and <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice><code>splice</code></a> are named similarly but are very different:</p> <ul> <li><code>slice</code> lets you copy an array or a part of it.</li> <li><code>splice</code> <strong>mutates</strong> the array (to insert or delete items).</li> </ul> <p>In React, you will be using <code>slice</code> (no <code>p</code>!) a lot more often because you don't want to mutate objects or arrays in state. <a href=/learn/updating-objects-in-state>Updating Objects</a> explains what mutation is and why it's not recommended for state.</p> <p></pitfall></p> <h3 id=adding-to-an-array>Adding to an array<a class=headerlink href=#adding-to-an-array title="Permanent link">&para;</a></h3> <p><code>push()</code> will mutate an array, which you don't want:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>List</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>setName</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=nx>setArtists</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>([]);</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Inspiring</span><span class=w> </span><span class=nx>sculptors</span><span class=o>:&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span><span class=w> </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setName</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>artists</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>                        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=nx>name</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>artists</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artist</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin-left</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Instead, create a <em>new</em> array which contains the existing items <em>and</em> a new item at the end. There are multiple ways to do this, but the easiest one is to use the <code>...</code> <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_array_literals>array spread</a> syntax:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>setArtists</span><span class=p>(</span>
<span class=w>    </span><span class=c1>// Replace the state</span>
<span class=w>    </span><span class=p>[</span>
<span class=w>        </span><span class=c1>// with a new array</span>
<span class=w>        </span><span class=p>...</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=c1>// that contains all the old items</span>
<span class=w>        </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=p>},</span><span class=w> </span><span class=c1>// and one new item at the end</span>
<span class=w>    </span><span class=p>]</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Now it works correctly:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>List</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>setName</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=nx>setArtists</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>([]);</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Inspiring</span><span class=w> </span><span class=nx>sculptors</span><span class=o>:&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span><span class=w> </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setName</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setArtists</span><span class=p>([...</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=p>}]);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>artists</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artist</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin-left</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>The array spread syntax also lets you prepend an item by placing it <em>before</em> the original <code>...artists</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>setArtists</span><span class=p>([</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>...</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=c1>// Put old items at the end</span>
<span class=p>]);</span>
</code></pre></div></td></tr></table></div> <p>In this way, spread can do the job of both <code>push()</code> by adding to the end of an array and <code>unshift()</code> by adding to the beginning of an array. Try it in the sandbox above!</p> <h3 id=removing-from-an-array>Removing from an array<a class=headerlink href=#removing-from-an-array title="Permanent link">&para;</a></h3> <p>The easiest way to remove an item from an array is to <em>filter it out</em>. In other words, you will produce a new array that will not contain that item. To do this, use the <code>filter</code> method, for example:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>initialArtists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Marta Colvin Andrade&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lamidi Olonade Fakeye&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Louise Nevelson&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>List</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=nx>setArtists</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialArtists</span><span class=p>);</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Inspiring</span><span class=w> </span><span class=nx>sculptors</span><span class=o>:&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>artists</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artist</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>name</span><span class=p>}{</span><span class=s2>&quot; &quot;</span><span class=p>}</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                            </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>setArtists</span><span class=p>(</span>
<span class=w>                                    </span><span class=nx>artists</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span>
<span class=w>                                </span><span class=p>);</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>&gt;</span>
<span class=w>                            </span><span class=nx>Delete</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Click the "Delete" button a few times, and look at its click handler.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>setArtists</span><span class=p>(</span><span class=nx>artists</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>));</span>
</code></pre></div></td></tr></table></div> <p>Here, <code>artists.filter(a =&gt; a.id !== artist.id)</code> means "create an array that consists of those <code>artists</code> whose IDs are different from <code>artist.id</code>". In other words, each artist's "Delete" button will filter <em>that</em> artist out of the array, and then request a re-render with the resulting array. Note that <code>filter</code> does not modify the original array.</p> <h3 id=transforming-an-array>Transforming an array<a class=headerlink href=#transforming-an-array title="Permanent link">&para;</a></h3> <p>If you want to change some or all items of the array, you can use <code>map()</code> to create a <strong>new</strong> array. The function you will pass to <code>map</code> can decide what to do with each item, based on its data or its index (or both).</p> <p>In this example, an array holds coordinates of two circles and a square. When you press the button, it moves only the circles down by 50 pixels. It does this by producing a new array of data using <code>map()</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>initialShapes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;circle&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>x</span><span class=o>:</span><span class=w> </span><span class=mf>50</span><span class=p>,</span><span class=w> </span><span class=nx>y</span><span class=o>:</span><span class=w> </span><span class=mf>100</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;square&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>x</span><span class=o>:</span><span class=w> </span><span class=mf>150</span><span class=p>,</span><span class=w> </span><span class=nx>y</span><span class=o>:</span><span class=w> </span><span class=mf>100</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>type</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;circle&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>x</span><span class=o>:</span><span class=w> </span><span class=mf>250</span><span class=p>,</span><span class=w> </span><span class=nx>y</span><span class=o>:</span><span class=w> </span><span class=mf>100</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ShapeEditor</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>shapes</span><span class=p>,</span><span class=w> </span><span class=nx>setShapes</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialShapes</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleClick</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>nextShapes</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>shapes</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>shape</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>shape</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s2>&quot;square&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=c1>// No change</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>shape</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=c1>// Return a new circle 50px below</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>shape</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>y</span><span class=o>:</span><span class=w> </span><span class=nx>shape</span><span class=p>.</span><span class=nx>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>50</span><span class=p>,</span>
<span class=w>                </span><span class=p>};</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>        </span><span class=c1>// Re-render with the new array</span>
<span class=w>        </span><span class=nx>setShapes</span><span class=p>(</span><span class=nx>nextShapes</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClick</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>Move</span><span class=w> </span><span class=nx>circles</span><span class=w> </span><span class=nx>down</span><span class=o>!&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>shapes</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>shape</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>div</span>
<span class=w>                    </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>shape</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>style</span><span class=o>=</span><span class=p>{{</span>
<span class=w>                        </span><span class=nx>background</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;purple&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>position</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;absolute&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>left</span><span class=o>:</span><span class=w> </span><span class=nx>shape</span><span class=p>.</span><span class=nx>x</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>top</span><span class=o>:</span><span class=w> </span><span class=nx>shape</span><span class=p>.</span><span class=nx>y</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>borderRadius</span><span class=o>:</span><span class=w> </span><span class=nx>shape</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s2>&quot;circle&quot;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s2>&quot;50%&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>width</span><span class=o>:</span><span class=w> </span><span class=mf>20</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>height</span><span class=o>:</span><span class=w> </span><span class=mf>20</span><span class=p>,</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>body</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>height</span><span class=p>:</span><span class=w> </span><span class=mi>300</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <h3 id=replacing-items-in-an-array>Replacing items in an array<a class=headerlink href=#replacing-items-in-an-array title="Permanent link">&para;</a></h3> <p>It is particularly common to want to replace one or more items in an array. Assignments like <code>arr[0] = 'bird'</code> are mutating the original array, so instead you'll want to use <code>map</code> for this as well.</p> <p>To replace an item, create a new array with <code>map</code>. Inside your <code>map</code> call, you will receive the item index as the second argument. Use it to decide whether to return the original item (the first argument) or something else:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>initialCounters</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=mf>0</span><span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>CounterList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>counters</span><span class=p>,</span><span class=w> </span><span class=nx>setCounters</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialCounters</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleIncrementClick</span><span class=p>(</span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>nextCounters</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>counters</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>c</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>i</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>index</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=c1>// Increment the clicked counter</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>c</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=c1>// The rest haven&#39;t changed</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>c</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>        </span><span class=nx>setCounters</span><span class=p>(</span><span class=nx>nextCounters</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>counters</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>counter</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>i</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=p>{</span><span class=nx>counter</span><span class=p>}</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleIncrementClick</span><span class=p>(</span><span class=nx>i</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>+</span><span class=mf>1</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <h3 id=inserting-into-an-array>Inserting into an array<a class=headerlink href=#inserting-into-an-array title="Permanent link">&para;</a></h3> <p>Sometimes, you may want to insert an item at a particular position that's neither at the beginning nor at the end. To do this, you can use the <code>...</code> array spread syntax together with the <code>slice()</code> method. The <code>slice()</code> method lets you cut a "slice" of the array. To insert an item, you will create an array that spreads the slice <em>before</em> the insertion point, then the new item, and then the rest of the original array.</p> <p>In this example, the Insert button always inserts at the index <code>1</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialArtists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Marta Colvin Andrade&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lamidi Olonade Fakeye&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Louise Nevelson&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>List</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>name</span><span class=p>,</span><span class=w> </span><span class=nx>setName</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>artists</span><span class=p>,</span><span class=w> </span><span class=nx>setArtists</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialArtists</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleClick</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>insertAt</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1</span><span class=p>;</span><span class=w> </span><span class=c1>// Could be any index</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>nextArtists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>            </span><span class=c1>// Items before the insertion point:</span>
<span class=w>            </span><span class=p>...</span><span class=nx>artists</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>insertAt</span><span class=p>),</span>
<span class=w>            </span><span class=c1>// New item:</span>
<span class=w>            </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=p>},</span>
<span class=w>            </span><span class=c1>// Items after the insertion point:</span>
<span class=w>            </span><span class=p>...</span><span class=nx>artists</span><span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=nx>insertAt</span><span class=p>),</span>
<span class=w>        </span><span class=p>];</span>
<span class=w>        </span><span class=nx>setArtists</span><span class=p>(</span><span class=nx>nextArtists</span><span class=p>);</span>
<span class=w>        </span><span class=nx>setName</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Inspiring</span><span class=w> </span><span class=nx>sculptors</span><span class=o>:&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span><span class=w> </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setName</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClick</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>Insert</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>artists</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artist</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>artist</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin-left</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <h3 id=making-other-changes-to-an-array>Making other changes to an array<a class=headerlink href=#making-other-changes-to-an-array title="Permanent link">&para;</a></h3> <p>There are some things you can't do with the spread syntax and non-mutating methods like <code>map()</code> and <code>filter()</code> alone. For example, you may want to reverse or sort an array. The JavaScript <code>reverse()</code> and <code>sort()</code> methods are mutating the original array, so you can't use them directly.</p> <p><strong>However, you can copy the array first, and then make changes to it.</strong></p> <p>For example:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Big Bellies&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lunar Landscape&quot;</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Terracotta Army&quot;</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>List</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>list</span><span class=p>,</span><span class=w> </span><span class=nx>setList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleClick</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>nextList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>list</span><span class=p>];</span>
<span class=w>        </span><span class=nx>nextList</span><span class=p>.</span><span class=nx>reverse</span><span class=p>();</span>
<span class=w>        </span><span class=nx>setList</span><span class=p>(</span><span class=nx>nextList</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{</span><span class=nx>handleClick</span><span class=p>}</span><span class=o>&gt;</span><span class=nx>Reverse</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>list</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>                </span><span class=p>))}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Here, you use the <code>[...list]</code> spread syntax to create a copy of the original array first. Now that you have a copy, you can use mutating methods like <code>nextList.reverse()</code> or <code>nextList.sort()</code>, or even assign individual items with <code>nextList[0] = "something"</code>.</p> <p>However, <strong>even if you copy an array, you can't mutate existing items <em>inside</em> of it directly.</strong> This is because copying is shallow--the new array will contain the same items as the original one. So if you modify an object inside the copied array, you are mutating the existing state. For example, code like this is a problem.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>nextList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>list</span><span class=p>];</span>
<span class=nx>nextList</span><span class=p>[</span><span class=mf>0</span><span class=p>].</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w> </span><span class=c1>// Problem: mutates list[0]</span>
<span class=nx>setList</span><span class=p>(</span><span class=nx>nextList</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Although <code>nextList</code> and <code>list</code> are two different arrays, <strong><code>nextList[0]</code> and <code>list[0]</code> point to the same object.</strong> So by changing <code>nextList[0].seen</code>, you are also changing <code>list[0].seen</code>. This is a state mutation, which you should avoid! You can solve this issue in a similar way to <a href=/learn/updating-objects-in-state#updating-a-nested-object>updating nested JavaScript objects</a>--by copying individual items you want to change instead of mutating them. Here's how.</p> <h2 id=updating-objects-inside-arrays>Updating objects inside arrays<a class=headerlink href=#updating-objects-inside-arrays title="Permanent link">&para;</a></h2> <p>Objects are not <em>really</em> located "inside" arrays. They might appear to be "inside" in code, but each object in an array is a separate value, to which the array "points". This is why you need to be careful when changing nested fields like <code>list[0]</code>. Another person's artwork list may point to the same element of the array!</p> <p><strong>When updating nested state, you need to create copies from the point where you want to update, and all the way up to the top level.</strong> Let's see how this works.</p> <p>In this example, two separate artwork lists have the same initial state. They are supposed to be isolated, but because of a mutation, their state is accidentally shared, and checking a box in one list affects the other list:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Big Bellies&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lunar Landscape&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Terracotta Army&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>BucketList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>myList</span><span class=p>,</span><span class=w> </span><span class=nx>setMyList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>yourList</span><span class=p>,</span><span class=w> </span><span class=nx>setYourList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleMyList</span><span class=p>(</span><span class=nx>artworkId</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>myNextList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>myList</span><span class=p>];</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>myNextList</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>);</span>
<span class=w>        </span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span>
<span class=w>        </span><span class=nx>setMyList</span><span class=p>(</span><span class=nx>myNextList</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleYourList</span><span class=p>(</span><span class=nx>artworkId</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>yourNextList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>yourList</span><span class=p>];</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>yourNextList</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>);</span>
<span class=w>        </span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span>
<span class=w>        </span><span class=nx>setYourList</span><span class=p>(</span><span class=nx>yourNextList</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Art</span><span class=w> </span><span class=nx>Bucket</span><span class=w> </span><span class=nx>List</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>My</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>myList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleMyList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Your</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>yourList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleYourList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>ItemList</span><span class=p>({</span><span class=w> </span><span class=nx>artworks</span><span class=p>,</span><span class=w> </span><span class=nx>onToggle</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>artworks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                            </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                            </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=p>}</span>
<span class=w>                            </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>onToggle</span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>);</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>/&gt;</span>
<span class=w>                        </span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>The problem is in code like this:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>myNextList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[...</span><span class=nx>myList</span><span class=p>];</span>
<span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>myNextList</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>);</span>
<span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span><span class=w> </span><span class=c1>// Problem: mutates an existing item</span>
<span class=nx>setMyList</span><span class=p>(</span><span class=nx>myNextList</span><span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Although the <code>myNextList</code> array itself is new, the <em>items themselves</em> are the same as in the original <code>myList</code> array. So changing <code>artwork.seen</code> changes the <em>original</em> artwork item. That artwork item is also in <code>yourList</code>, which causes the bug. Bugs like this can be difficult to think about, but thankfully they disappear if you avoid mutating state.</p> <p><strong>You can use <code>map</code> to substitute an old item with its updated version without mutation.</strong></p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>setMyList</span><span class=p>(</span>
<span class=w>    </span><span class=nx>myList</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=c1>// Create a *new* object with changes</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=nx>artwork</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=nx>nextSeen</span><span class=w> </span><span class=p>};</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=c1>// No changes</span>
<span class=w>            </span><span class=k>return</span><span class=w> </span><span class=nx>artwork</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>})</span>
<span class=p>);</span>
</code></pre></div></td></tr></table></div> <p>Here, <code>...</code> is the object spread syntax used to <a href=/learn/updating-objects-in-state#copying-objects-with-the-spread-syntax>create a copy of an object.</a></p> <p>With this approach, none of the existing state items are being mutated, and the bug is fixed:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Big Bellies&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lunar Landscape&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Terracotta Army&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>BucketList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>myList</span><span class=p>,</span><span class=w> </span><span class=nx>setMyList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>yourList</span><span class=p>,</span><span class=w> </span><span class=nx>setYourList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleMyList</span><span class=p>(</span><span class=nx>artworkId</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setMyList</span><span class=p>(</span>
<span class=w>            </span><span class=nx>myList</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// Create a *new* object with changes</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=nx>artwork</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=nx>nextSeen</span><span class=w> </span><span class=p>};</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// No changes</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>artwork</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleYourList</span><span class=p>(</span><span class=nx>artworkId</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setYourList</span><span class=p>(</span>
<span class=w>            </span><span class=nx>yourList</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// Create a *new* object with changes</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=nx>artwork</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=nx>nextSeen</span><span class=w> </span><span class=p>};</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=c1>// No changes</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>artwork</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Art</span><span class=w> </span><span class=nx>Bucket</span><span class=w> </span><span class=nx>List</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>My</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>myList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleMyList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Your</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>yourList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleYourList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>ItemList</span><span class=p>({</span><span class=w> </span><span class=nx>artworks</span><span class=p>,</span><span class=w> </span><span class=nx>onToggle</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>artworks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                            </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                            </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=p>}</span>
<span class=w>                            </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>onToggle</span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>);</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>/&gt;</span>
<span class=w>                        </span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>In general, <strong>you should only mutate objects that you have just created.</strong> If you were inserting a <em>new</em> artwork, you could mutate it, but if you're dealing with something that's already in state, you need to make a copy.</p> <h3 id=write-concise-update-logic-with-immer>Write concise update logic with Immer<a class=headerlink href=#write-concise-update-logic-with-immer title="Permanent link">&para;</a></h3> <p>Updating nested arrays without mutation can get a little bit repetitive. <a href=/learn/updating-objects-in-state#write-concise-update-logic-with-immer>Just as with objects</a>:</p> <ul> <li>Generally, you shouldn't need to update state more than a couple of levels deep. If your state objects are very deep, you might want to <a href=/learn/choosing-the-state-structure#avoid-deeply-nested-state>restructure them differently</a> so that they are flat.</li> <li>If you don't want to change your state structure, you might prefer to use <a href=https://github.com/immerjs/use-immer>Immer</a>, which lets you write using the convenient but mutating syntax and takes care of producing the copies for you.</li> </ul> <p>Here is the Art Bucket List example rewritten with Immer:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useImmer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;use-immer&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialList</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Big Bellies&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Lunar Landscape&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Terracotta Army&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>seen</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>BucketList</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>myList</span><span class=p>,</span><span class=w> </span><span class=nx>updateMyList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useImmer</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>yourList</span><span class=p>,</span><span class=w> </span><span class=nx>updateYourList</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useImmer</span><span class=p>(</span><span class=nx>initialList</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleMyList</span><span class=p>(</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateMyList</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>id</span><span class=p>);</span>
<span class=w>            </span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleToggleYourList</span><span class=p>(</span><span class=nx>artworkId</span><span class=p>,</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateYourList</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>);</span>
<span class=w>            </span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h1</span><span class=o>&gt;</span><span class=nx>Art</span><span class=w> </span><span class=nx>Bucket</span><span class=w> </span><span class=nx>List</span><span class=o>&lt;</span><span class=err>/h1&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>My</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>myList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleMyList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>h2</span><span class=o>&gt;</span><span class=nx>Your</span><span class=w> </span><span class=nx>list</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=nx>art</span><span class=w> </span><span class=nx>to</span><span class=w> </span><span class=nx>see</span><span class=o>:&lt;</span><span class=err>/h2&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>ItemList</span><span class=w> </span><span class=nx>artworks</span><span class=o>=</span><span class=p>{</span><span class=nx>yourList</span><span class=p>}</span><span class=w> </span><span class=nx>onToggle</span><span class=o>=</span><span class=p>{</span><span class=nx>handleToggleYourList</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>ItemList</span><span class=p>({</span><span class=w> </span><span class=nx>artworks</span><span class=p>,</span><span class=w> </span><span class=nx>onToggle</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>artworks</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>artwork</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                            </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                            </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=p>}</span>
<span class=w>                            </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                                </span><span class=nx>onToggle</span><span class=p>(</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>id</span><span class=p>,</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>);</span>
<span class=w>                            </span><span class=p>}}</span>
<span class=w>                        </span><span class=o>/&gt;</span>
<span class=w>                        </span><span class=p>{</span><span class=nx>artwork</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.7.3&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-dom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;use-immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.5.1&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;build&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts build&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;test&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts test --env=jsdom&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;eject&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts eject&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>Note how with Immer, <strong>mutation like <code>artwork.seen = nextSeen</code> is now okay:</strong></p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nx>updateMyTodos</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>artwork</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>a</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>a</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>artworkId</span><span class=p>);</span>
<span class=w>    </span><span class=nx>artwork</span><span class=p>.</span><span class=nx>seen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextSeen</span><span class=p>;</span>
<span class=p>});</span>
</code></pre></div></td></tr></table></div> <p>This is because you're not mutating the <em>original</em> state, but you're mutating a special <code>draft</code> object provided by Immer. Similarly, you can apply mutating methods like <code>push()</code> and <code>pop()</code> to the content of the <code>draft</code>.</p> <p>Behind the scenes, Immer always constructs the next state from scratch according to the changes that you've done to the <code>draft</code>. This keeps your event handlers very concise without ever mutating state.</p> <p><recap></p> <ul> <li>You can put arrays into state, but you can't change them.</li> <li>Instead of mutating an array, create a <em>new</em> version of it, and update the state to it.</li> <li>You can use the <code>[...arr, newItem]</code> array spread syntax to create arrays with new items.</li> <li>You can use <code>filter()</code> and <code>map()</code> to create new arrays with filtered or transformed items.</li> <li>You can use Immer to keep your code concise.</li> </ul> <p></recap></p> <p><challenges></p> <h4 id=update-an-item-in-the-shopping-cart>Update an item in the shopping cart<a class=headerlink href=#update-an-item-in-the-shopping-cart title="Permanent link">&para;</a></h4> <p>Fill in the <code>handleIncreaseClick</code> logic so that pressing "+" increases the corresponding number:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>initialProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Baklava&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Cheese&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>5</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Spaghetti&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ShoppingCart</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>products</span><span class=p>,</span><span class=w> </span><span class=nx>setProducts</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialProducts</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=p>(</span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;)</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>+</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>You can use the <code>map</code> function to create a new array, and then use the <code>...</code> object spread syntax to create a copy of the changed object for the new array:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>initialProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Baklava&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Cheese&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>5</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Spaghetti&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ShoppingCart</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>products</span><span class=p>,</span><span class=w> </span><span class=nx>setProducts</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialProducts</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setProducts</span><span class=p>(</span>
<span class=w>            </span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>product</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>                    </span><span class=p>};</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>product</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=p>(</span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;)</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>+</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p></solution></p> <h4 id=remove-an-item-from-the-shopping-cart>Remove an item from the shopping cart<a class=headerlink href=#remove-an-item-from-the-shopping-cart title="Permanent link">&para;</a></h4> <p>This shopping cart has a working "+" button, but the "â€“" button doesn't do anything. You need to add an event handler to it so that pressing it decreases the <code>count</code> of the corresponding product. If you press "â€“" when the count is 1, the product should automatically get removed from the cart. Make sure it never shows 0.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>initialProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Baklava&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Cheese&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>5</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Spaghetti&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ShoppingCart</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>products</span><span class=p>,</span><span class=w> </span><span class=nx>setProducts</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialProducts</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setProducts</span><span class=p>(</span>
<span class=w>            </span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>product</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>                    </span><span class=p>};</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>product</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=p>(</span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;)</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>+</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span><span class=o>&gt;</span><span class=err>â€“</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>You can first use <code>map</code> to produce a new array, and then <code>filter</code> to remove products with a <code>count</code> set to <code>0</code>:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=kd>const</span><span class=w> </span><span class=nx>initialProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Baklava&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Cheese&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>5</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Spaghetti&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span>
<span class=w>    </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>ShoppingCart</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>products</span><span class=p>,</span><span class=w> </span><span class=nx>setProducts</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialProducts</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setProducts</span><span class=p>(</span>
<span class=w>            </span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>product</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>                    </span><span class=p>};</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>product</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDecreaseClick</span><span class=p>(</span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>let</span><span class=w> </span><span class=nx>nextProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>productId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=p>...</span><span class=nx>product</span><span class=p>,</span>
<span class=w>                    </span><span class=nx>count</span><span class=o>:</span><span class=w> </span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mf>1</span><span class=p>,</span>
<span class=w>                </span><span class=p>};</span>
<span class=w>            </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>product</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>        </span><span class=nx>nextProducts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextProducts</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>p</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>p</span><span class=p>.</span><span class=nx>count</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
<span class=w>        </span><span class=nx>setProducts</span><span class=p>(</span><span class=nx>nextProducts</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>products</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>product</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span><span class=w> </span><span class=p>(</span><span class=o>&lt;</span><span class=nx>b</span><span class=o>&gt;</span><span class=p>{</span><span class=nx>product</span><span class=p>.</span><span class=nx>count</span><span class=p>}</span><span class=o>&lt;</span><span class=err>/b&gt;)</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleIncreaseClick</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=o>+</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                        </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                            </span><span class=nx>handleDecreaseClick</span><span class=p>(</span><span class=nx>product</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>                        </span><span class=p>}}</span>
<span class=w>                    </span><span class=o>&gt;</span>
<span class=w>                        </span><span class=err>â€“</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p></solution></p> <h4 id=fix-the-mutations-using-non-mutative-methods>Fix the mutations using non-mutative methods<a class=headerlink href=#fix-the-mutations-using-non-mutative-methods title="Permanent link">&para;</a></h4> <p>In this example, all of the event handlers in <code>App.js</code> use mutation. As a result, editing and deleting todos doesn't work. Rewrite <code>handleAddTodo</code>, <code>handleChangeTodo</code>, and <code>handleDeleteTodo</code> to use the non-mutative methods:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTodo</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTodo.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTodos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Buy milk&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Eat tacos&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Brew tea&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>setTodos</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialTodos</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todos</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>title</span><span class=p>,</span>
<span class=w>            </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTodo</span><span class=p>(</span><span class=nx>nextTodo</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>todo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>todos</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span>
<span class=w>        </span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>done</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTodo</span><span class=p>(</span><span class=nx>todoId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>todos</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>todoId</span><span class=p>);</span>
<span class=w>        </span><span class=nx>todos</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTodo</span><span class=w> </span><span class=nx>onAddTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTodo</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>todos</span><span class=o>=</span><span class=p>{</span><span class=nx>todos</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTodo</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTodo</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTodo</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>title</span><span class=p>,</span><span class=w> </span><span class=nx>setTitle</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add todo&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setTitle</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setTitle</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTodo</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>todo</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTodo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTodo</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>todo</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>todoContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todoContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>In <code>handleAddTodo</code>, you can use the array spread syntax. In <code>handleChangeTodo</code>, you can create a new array with <code>map</code>. In <code>handleDeleteTodo</code>, you can create a new array with <code>filter</code>. Now the list works correctly:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTodo</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTodo.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTodos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Buy milk&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Eat tacos&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Brew tea&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>setTodos</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialTodos</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTodos</span><span class=p>([</span>
<span class=w>            </span><span class=p>...</span><span class=nx>todos</span><span class=p>,</span>
<span class=w>            </span><span class=p>{</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>                </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>title</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>},</span>
<span class=w>        </span><span class=p>]);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTodo</span><span class=p>(</span><span class=nx>nextTodo</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTodos</span><span class=p>(</span>
<span class=w>            </span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>t</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTodo</span><span class=p>(</span><span class=nx>todoId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>setTodos</span><span class=p>(</span><span class=nx>todos</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>todoId</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTodo</span><span class=w> </span><span class=nx>onAddTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTodo</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>todos</span><span class=o>=</span><span class=p>{</span><span class=nx>todos</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTodo</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTodo</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTodo</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>title</span><span class=p>,</span><span class=w> </span><span class=nx>setTitle</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add todo&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setTitle</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setTitle</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTodo</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>todo</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTodo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTodo</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>todo</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>todoContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todoContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p></solution></p> <h4 id=fix-the-mutations-using-immer>Fix the mutations using Immer<a class=headerlink href=#fix-the-mutations-using-immer title="Permanent link">&para;</a></h4> <p>This is the same example as in the previous challenge. This time, fix the mutations by using Immer. For your convenience, <code>useImmer</code> is already imported, so you need to change the <code>todos</code> state variable to use it.</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useImmer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;use-immer&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTodo</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTodo.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTodos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Buy milk&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Eat tacos&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Brew tea&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>setTodos</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=nx>initialTodos</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todos</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>title</span><span class=p>,</span>
<span class=w>            </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTodo</span><span class=p>(</span><span class=nx>nextTodo</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>todo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>todos</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>        </span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span>
<span class=w>        </span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>done</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTodo</span><span class=p>(</span><span class=nx>todoId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>todos</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>todoId</span><span class=p>);</span>
<span class=w>        </span><span class=nx>todos</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=mf>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTodo</span><span class=w> </span><span class=nx>onAddTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTodo</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>todos</span><span class=o>=</span><span class=p>{</span><span class=nx>todos</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTodo</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTodo</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTodo</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>title</span><span class=p>,</span><span class=w> </span><span class=nx>setTitle</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add todo&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setTitle</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setTitle</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTodo</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>todo</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTodo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTodo</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>todo</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>todoContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todoContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.7.3&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-dom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;use-immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.5.1&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;build&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts build&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;test&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts test --env=jsdom&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;eject&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts eject&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p><solution></p> <p>With Immer, you can write code in the mutative fashion, as long as you're only mutating parts of the <code>draft</code> that Immer gives you. Here, all mutations are performed on the <code>draft</code> so the code works:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useImmer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;use-immer&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTodo</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTodo.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTodos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Buy milk&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Eat tacos&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Brew tea&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>updateTodos</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useImmer</span><span class=p>(</span><span class=nx>initialTodos</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>draft</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>                </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>title</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTodo</span><span class=p>(</span><span class=nx>nextTodo</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>todo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>find</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>id</span><span class=p>);</span>
<span class=w>            </span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>title</span><span class=p>;</span>
<span class=w>            </span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>done</span><span class=p>;</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTodo</span><span class=p>(</span><span class=nx>todoId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>index</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>draft</span><span class=p>.</span><span class=nx>findIndex</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>todoId</span><span class=p>);</span>
<span class=w>            </span><span class=nx>draft</span><span class=p>.</span><span class=nx>splice</span><span class=p>(</span><span class=nx>index</span><span class=p>,</span><span class=w> </span><span class=mf>1</span><span class=p>);</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTodo</span><span class=w> </span><span class=nx>onAddTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTodo</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>todos</span><span class=o>=</span><span class=p>{</span><span class=nx>todos</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTodo</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTodo</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTodo</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>title</span><span class=p>,</span><span class=w> </span><span class=nx>setTitle</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add todo&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setTitle</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setTitle</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTodo</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>todo</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTodo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTodo</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>todo</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>todoContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todoContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.7.3&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-dom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;use-immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.5.1&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;build&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts build&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;test&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts test --env=jsdom&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;eject&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts eject&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>You can also mix and match the mutative and non-mutative approaches with Immer.</p> <p>For example, in this version <code>handleAddTodo</code> is implemented by mutating the Immer <code>draft</code>, while <code>handleChangeTodo</code> and <code>handleDeleteTodo</code> use the non-mutative <code>map</code> and <code>filter</code> methods:</p> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useImmer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;use-immer&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>AddTodo</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./AddTodo.js&quot;</span><span class=p>;</span>
<span class=k>import</span><span class=w> </span><span class=nx>TaskList</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;./TaskList.js&quot;</span><span class=p>;</span>

<span class=kd>let</span><span class=w> </span><span class=nx>nextId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>3</span><span class=p>;</span>
<span class=kd>const</span><span class=w> </span><span class=nx>initialTodos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>0</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Buy milk&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Eat tacos&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=w>    </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=mf>2</span><span class=p>,</span><span class=w> </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Brew tea&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>},</span>
<span class=p>];</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskApp</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>updateTodos</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useImmer</span><span class=p>(</span><span class=nx>initialTodos</span><span class=p>);</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>((</span><span class=nx>draft</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>draft</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
<span class=w>                </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=nx>nextId</span><span class=o>++</span><span class=p>,</span>
<span class=w>                </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>title</span><span class=p>,</span>
<span class=w>                </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleChangeTodo</span><span class=p>(</span><span class=nx>nextTodo</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>(</span>
<span class=w>            </span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>.</span><span class=nx>id</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>nextTodo</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=k>return</span><span class=w> </span><span class=nx>todo</span><span class=p>;</span>
<span class=w>                </span><span class=p>}</span>
<span class=w>            </span><span class=p>})</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kd>function</span><span class=w> </span><span class=nx>handleDeleteTodo</span><span class=p>(</span><span class=nx>todoId</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>updateTodos</span><span class=p>(</span><span class=nx>todos</span><span class=p>.</span><span class=nx>filter</span><span class=p>((</span><span class=nx>t</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>t</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>todoId</span><span class=p>));</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>AddTodo</span><span class=w> </span><span class=nx>onAddTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleAddTodo</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>TaskList</span>
<span class=w>                </span><span class=nx>todos</span><span class=o>=</span><span class=p>{</span><span class=nx>todos</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChangeTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeTodo</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onDeleteTodo</span><span class=o>=</span><span class=p>{</span><span class=nx>handleDeleteTodo</span><span class=p>}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>AddTodo</span><span class=p>({</span><span class=w> </span><span class=nx>onAddTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>title</span><span class=p>,</span><span class=w> </span><span class=nx>setTitle</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>placeholder</span><span class=o>=</span><span class=s2>&quot;Add todo&quot;</span>
<span class=w>                </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setTitle</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>)}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span>
<span class=w>                </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>setTitle</span><span class=p>(</span><span class=s2>&quot;&quot;</span><span class=p>);</span>
<span class=w>                    </span><span class=nx>onAddTodo</span><span class=p>(</span><span class=nx>title</span><span class=p>);</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>&gt;</span>
<span class=w>                </span><span class=nx>Add</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s2>&quot;react&quot;</span><span class=p>;</span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>TaskList</span><span class=p>({</span><span class=w> </span><span class=nx>todos</span><span class=p>,</span><span class=w> </span><span class=nx>onChangeTodo</span><span class=p>,</span><span class=w> </span><span class=nx>onDeleteTodo</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>ul</span><span class=o>&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todos</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>todo</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>(</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>li</span><span class=w> </span><span class=nx>key</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>}</span><span class=o>&gt;</span>
<span class=w>                    </span><span class=o>&lt;</span><span class=nx>Task</span>
<span class=w>                        </span><span class=nx>todo</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChangeTodo</span><span class=p>}</span>
<span class=w>                        </span><span class=nx>onDelete</span><span class=o>=</span><span class=p>{</span><span class=nx>onDeleteTodo</span><span class=p>}</span>
<span class=w>                    </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=err>/li&gt;</span>
<span class=w>            </span><span class=p>))}</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/ul&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>

<span class=kd>function</span><span class=w> </span><span class=nx>Task</span><span class=p>({</span><span class=w> </span><span class=nx>todo</span><span class=p>,</span><span class=w> </span><span class=nx>onChange</span><span class=p>,</span><span class=w> </span><span class=nx>onDelete</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>isEditing</span><span class=p>,</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>todoContent</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isEditing</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                    </span><span class=nx>value</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                        </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                            </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                            </span><span class=nx>title</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>value</span><span class=p>,</span>
<span class=w>                        </span><span class=p>});</span>
<span class=w>                    </span><span class=p>}}</span>
<span class=w>                </span><span class=o>/&gt;</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>false</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Save</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nx>todoContent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<span class=w>            </span><span class=o>&lt;&gt;</span>
<span class=w>                </span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>}</span>
<span class=w>                </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>setIsEditing</span><span class=p>(</span><span class=kc>true</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Edit</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=err>/&gt;</span>
<span class=w>        </span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>label</span><span class=o>&gt;</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>input</span>
<span class=w>                </span><span class=nx>type</span><span class=o>=</span><span class=s2>&quot;checkbox&quot;</span>
<span class=w>                </span><span class=nx>checked</span><span class=o>=</span><span class=p>{</span><span class=nx>todo</span><span class=p>.</span><span class=nx>done</span><span class=p>}</span>
<span class=w>                </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>onChange</span><span class=p>({</span>
<span class=w>                        </span><span class=p>...</span><span class=nx>todo</span><span class=p>,</span>
<span class=w>                        </span><span class=nx>done</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>target</span><span class=p>.</span><span class=nx>checked</span><span class=p>,</span>
<span class=w>                    </span><span class=p>});</span>
<span class=w>                </span><span class=p>}}</span>
<span class=w>            </span><span class=o>/&gt;</span>
<span class=w>            </span><span class=p>{</span><span class=nx>todoContent</span><span class=p>}</span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>on_click</span><span class=o>=</span><span class=p>{()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>onDelete</span><span class=p>(</span><span class=nx>todo</span><span class=p>.</span><span class=nx>id</span><span class=p>)}</span><span class=o>&gt;</span><span class=nx>Delete</span><span class=o>&lt;</span><span class=err>/button&gt;</span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/label&gt;</span>
<span class=w>    </span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nt>button</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>list-style-type</span><span class=p>:</span><span class=w> </span><span class=kc>none</span><span class=p>;</span>
<span class=p>}</span>
<span class=nt>ul</span><span class=o>,</span>
<span class=nt>li</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>margin</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>padding</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span class=p>{</span>
<span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1.7.3&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-dom&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;react-scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;latest&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;use-immer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.5.1&quot;</span>
<span class=w>    </span><span class=p>},</span>
<span class=w>    </span><span class=nt>&quot;scripts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts start&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;build&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts build&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;test&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts test --env=jsdom&quot;</span><span class=p>,</span>
<span class=w>        </span><span class=nt>&quot;eject&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;react-scripts eject&quot;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></div> <p>With Immer, you can pick the style that feels the most natural for each separate case.</p> <p></solution></p> <p></challenges></p> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="August 28, 2023 08:11:22 UTC">August 28, 2023</span> </small> </div> <div class=md-source-date> <small> Authors: <span class="git-page-authors git-authors"><a href=mailto:16909269+archmonger@users.noreply.github.com>Archmonger</a></span> </small> </div> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy;<div id=year> </div> <script> document.getElementById("year").innerHTML = new Date().getFullYear(); </script>Reactive Python and affiliates.<div class=legal-footer-right>This project has no affiliation to ReactJS or Meta Platforms, Inc.</div> </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.code.copy", "search.highlight"], "search": "../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.4e0fa4ba.min.js></script> <script src=../../assets/js/main.js></script> </body> </html>